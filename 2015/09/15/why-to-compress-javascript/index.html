<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>JavaScriptのファイル内容を圧縮する理由など | mtdew2</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="@debiruさんのツイートにハッとした。（@debiruさんのツイートにはハッとさせられることが多い）http://twitter.com/debiru/status/642357943560638465
上記ツイートの後

闇雲に「JSは圧縮するもの」という認識で圧縮している人が多いように感じています。（https://twitter.com/debiru/status/64236238467">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScriptのファイル内容を圧縮する理由など">
<meta property="og:url" content="http://yoursite.com/2015/09/15/why-to-compress-javascript/index.html">
<meta property="og:site_name" content="mtdew2">
<meta property="og:description" content="@debiruさんのツイートにハッとした。（@debiruさんのツイートにはハッとさせられることが多い）http://twitter.com/debiru/status/642357943560638465
上記ツイートの後

闇雲に「JSは圧縮するもの」という認識で圧縮している人が多いように感じています。（https://twitter.com/debiru/status/64236238467">
<meta property="og:updated_time" content="2015-10-07T03:54:28.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScriptのファイル内容を圧縮する理由など">
<meta name="twitter:description" content="@debiruさんのツイートにハッとした。（@debiruさんのツイートにはハッとさせられることが多い）http://twitter.com/debiru/status/642357943560638465
上記ツイートの後

闇雲に「JSは圧縮するもの」という認識で圧縮している人が多いように感じています。（https://twitter.com/debiru/status/64236238467">
<meta name="twitter:creator" content="@mt_dew2">
  
    <link rel="alternative" href="/atom.xml" title="mtdew2" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-67094019-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">mtdew2</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">blog</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-home-icon" class="nav-icon" href="/"></a>
        
          <a id="nav-archives-icon" class="nav-icon" href="/archives"></a>
        
          <a id="nav-about-icon" class="nav-icon" href="/about"></a>
        
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
      </nav>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-why-to-compress-javascript" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      JavaScriptのファイル内容を圧縮する理由など
    </h1>
  

      </header>
    
    <time class="article-date" datetime="2015-09-15T07:04:03.000Z" itemprop="datePublished">09-15-2015</time>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/memo/">memo</a>
  </div>

  </div>
  <div class="article-inner">
    <div class="article-entry" itemprop="articleBody">
      
        <p>@debiruさんのツイートにハッとした。（@debiruさんのツイートにはハッとさせられることが多い）<br><a href="http://twitter.com/debiru/status/642357943560638465" target="_blank" rel="external">http://twitter.com/debiru/status/642357943560638465</a></p>
<p>上記ツイートの後</p>
<blockquote>
<p>闇雲に「JSは圧縮するもの」という認識で圧縮している人が多いように感じています。<br><br>（<a href="https://twitter.com/debiru/status/642362384670068736" target="_blank" rel="external">https://twitter.com/debiru/status/642362384670068736</a></p>
</blockquote>
<p>と、おっしゃっていた。まさに、私がそれ（闇雲に圧縮している人）です…。ごめんなさい。<br>そこで、JavaScriptの内容をなぜ圧縮するのか考えてみました。誰かの役に立つことはないと思いますが、備忘録的にまとめます。</p>
<h2 id="私の考える圧縮の理由">私の考える圧縮の理由</h2><ul>
<li>ファイルサイズを小さくする</li>
<li>↑ によって読み込み速度をあげる</li>
</ul>
<p>これしか思いつきません。無知だ。<br>JavaScriptやCSSファイルを圧縮するウェブサービスやツールが話題になった頃に、「あ〜とりあえず圧縮したほうがいいらしいよ〜？」くらいの気持ちで、なんでもかんでも圧縮しはじめた私は、なぜ圧縮するのかなんて考えたことがありません。<br>しかし、私が制作に携わるサイトは小規模〜中規模でアクセス数も多いとはいえない。圧縮したからといって、読み込み速度の違いを実感することはない。圧縮の前後で明らかに違うのは、JavaScriptファイルのソースコードの可読性のみ…？</p>
<h2 id="聞いてみた">聞いてみた</h2><p>最近とってもお世話になっている@umekichinanoさんにJavaScriptファイルの内容の圧縮について、見解を伺いました。<br>以下、インタビュー形式の箇条書きでまとめます。</p>
<p><dl></dl></p>
<p><dt>JavaScriptファイルのコードを圧縮する理由は何だと思いますか</dt></p>
<dd>元々の目的は、サイズダウンすることによってページのレスポンスを早くすることだったかと</dd><br><dd>個人プログラマーはコードを読まれたくなくて圧縮していることも</dd><br><dd>会社等のルールに準じていることも</dd><br><dd>アクセス数が少ないと圧縮しても変わらないが、数百億のアクセス数があるレベルになると、多少のサイズダウンでも転送量に差が出る</dd>

<p><dt>可読性以外に圧縮しないメリットはあるのでしょうか</dt></p>
<dd>特にないかもしれない</dd><br><dd>圧縮（によるサイズダウン）はどんなときに必要といえるでしょう</dd><br><dd>重量課金制のサーバ（AWS等）を使う等、転送量を気にする必要があるとき</dd><br><dd>JavaScriptやCSSのファイルサイズがとても大きいサイトで、スマートフォンからのアクセス等を考慮したとき</dd>

<p><dt>「圧縮することにこの程度のメリットがある、とは言えないが、アクセス数・転送量を考慮するときや、明らかにサイズが大きいファイルをサイズダウンさせるという意味では、十分にメリットがある」という認識で大丈夫でしょうか…</dt></p>
<dd>今の世の中ではそれで十分かと</dd><br><dd>今後、5G回線が普及して10Gbpsのデータが行き交う世の中になったときは、ほぼ意味のない労力になっているかも</dd>


<p>@umekichinanoさん、本当にありがとうございます。理解には程遠いですが、だいぶ雰囲気をつかめました。<br>ウェブサイトのパフォーマンスやチューニングについて知識がないままでは、この件を理解することはできなさそうなので、今後の課題にします。</p>
<h2 id="あとがきと課題">あとがきと課題</h2><p>今私が仕事で携わっている案件の規模では、圧縮することに大きなメリットはなさそうだということがわかりました。<br>それでも、圧縮しない理由がないなら、ファイルサイズは小さいほうがいいだろうと思うので、今後も業務で制作するサイトのJavaScriptのファイルは圧縮すると思います。</p>
<h3 id="HTMLファイルは圧縮しないの…？">HTMLファイルは圧縮しないの…？</h3><p>これすごい気になってるんですが、CSSとJSのファイルを圧縮していても、HTMLはしていないサイトって結構見かけるような気がします。（わ、私がそうです。）<br>個人的に、自分のも他所様のもHTMLのソースコードは見ることが多いので、圧縮されていないほうが助かるのですが、CSSとJavaScriptは圧縮するのにHTMLだけしないのもなぁ。と疑問に思っています。<br>読みやすさのためだけに圧縮していないのか、他に理由があるのか、圧縮する必要がないのか、勉強したらわかるようになるのかしら。</p>
<p><ins>2015/9/16 20:30 追記<br>@webcre8さんに説明していただき、↓読んだらだいたい解決しました。HTMLファイルは圧縮しないほうがよさそう。<br><a href="http://webcre8.jp/investigate/html-implied-specifications.html" target="_blank" rel="external">http://webcre8.jp/investigate/html-implied-specifications.html</a></ins></p>
<h3 id="参考と課題の記事">参考と課題の記事</h3><ul>
<li>Webフロントエンドパフォーマンスチューニング // Speaker Deck : <a href="https://speakerdeck.com/h13i32maru/webhurontoendopahuomansutiyuningu" target="_blank" rel="external">https://speakerdeck.com/h13i32maru/webhurontoendopahuomansutiyuningu</a></li>
<li>ユーザーの体感速度を高めるためのJavaScriptチューニング（前編） | HTML5Experts.jp : <a href="https://html5experts.jp/yoshikawa_t/877/" target="_blank" rel="external">https://html5experts.jp/yoshikawa_t/877/</a></li>
<li>ブラウザのしくみ: 最新ウェブブラウザの内部構造 - HTML5 Rocks : <a href="http://www.html5rocks.com/ja/tutorials/internals/howbrowserswork/" target="_blank" rel="external">http://www.html5rocks.com/ja/tutorials/internals/howbrowserswork/</a></li>
<li>Webサイトのパフォーマンスをチューニングする | PowerCMS ブログ | PowerCMS - カスタマイズする CMS。 : <a href="http://www.powercms.jp/blog/2013/02/website_fast.html" target="_blank" rel="external">http://www.powercms.jp/blog/2013/02/website_fast.html</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/09/15/why-to-compress-javascript/" data-id="cifg99tq000011vw39i027pbg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/10/04/compress-html/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          HTMLは圧縮（compressやminify）すべきか
        
      </div>
    </a>
  
  
    <a href="/2015/09/03/back-to-basics-css/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Back to Basics CSSの感想と自分用まとめ（とありがたきスライド）</div>
    </a>
  
</nav>

  
</article>

</section>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 Maiha Takahashi<br>
      <a href="https://github.com/steven5538/hexo-theme-athena" target="_blank">Athena</a> by <a href="http://steven5538.tw" target="_blank">Steven5538</a> | Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>
  </div>
</body>
</html>